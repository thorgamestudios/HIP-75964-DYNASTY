<!doctype html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <title>HIP 76954 DYNASTY</title>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
      }
      header {
        background-color: #333;
        color: #fff;
        text-align: center;
        padding: 1rem;
      }
      .layout {
        display: flex;
        min-height: calc(100vh - 72px); /* subtract header height approx */
      }
      aside {
        width: 200px;
        background-color: #f4f4f4;
        padding: 1rem;
      }
      main {
        flex-grow: 1;
        padding: 1rem;
      }
      .nav-button {
        width: 100%;
        padding: 0.5rem;
        border: none;
        background-color: #ddd;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>HIP 76954 DYNASTY</h1>
    </header>
    <div class="layout">
      <aside>
        <button id="overviewBtn" class="nav-button">Přehled</button>
      </aside>
      <main id="content"></main>
    </div>
    <script>
      const overviewBtn = document.getElementById("overviewBtn");
      const content = document.getElementById("content");

      async function loadOverview() {
        content.innerHTML = "<p>Načítání...</p>";
        try {
          const res = await fetch(
            "https://elitebgs.app/api/ebgs/v5/factions?name=HIP%2076954%20DYNASTY",
          );
          if (!res.ok) throw new Error("Chyba API");
          const data = await res.json();
          const faction = data.docs && data.docs[0];
          if (!faction || !Array.isArray(faction.faction_presence)) {
            content.textContent = "Neočekávaný formát odpovědi API.";
            return;
          }

          const list = document.createElement("ul");
          faction.faction_presence.forEach((p) => {
            const li = document.createElement("li");
            const inf = Math.round(p.influence * 100);
            li.textContent = `${p.system_name} — ${inf}% — ${p.faction_state}`;
            list.appendChild(li);
          });

          content.innerHTML = "";
          content.appendChild(list);
        } catch (err) {
          console.error(err);
          content.textContent = "Nepodařilo se načíst data.";
        }
      }

      overviewBtn.addEventListener("click", loadOverview);
    </script>
  </body>
</html>
